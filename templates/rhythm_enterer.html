<html>
<head>
    <script src="script/json2xml.js"></script>
    <link rel="stylesheet" type="text/css" href="style/rhythm_enterer.css">
</head>

<style type="text/css">
     /*
    a = '<td> <input type="checkbox" id="cb%s" value=""> </td> %s '
    b = '</tr><br><tr id="row%s">'
    for i in range(1, 16**2+1):
        print a % (str(i).zfill(3), b % str(i / 16).zfill(3) if not i % 16 else '')
    */
</style>
<body>
<div id="enterer_container">
<table>
    <tbody>
        <tr>
            <td><label>Number rows</label><input type="text" id="num_rows" value="16"/></td>
        </tr>
    </tbody>
</table>
<table id="main_table">
    <tbody>
                                                            <tr id="table_header"> 
    <td> <label class="table_header">1 </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header">2 </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header">3 </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header">4 </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header"> </label> </td>  
    <td> <label class="table_header"> </label> </td> </tr><tr id="row000">

    <td> <input type="checkbox" id="cb001" value=""> </td> 
    <td> <input type="checkbox" id="cb002" value=""> </td>  
    <td> <input type="checkbox" id="cb003" value=""> </td>  
    <td> <input type="checkbox" id="cb004" value=""> </td>  
    <td> <input type="checkbox" id="cb005" value=""> </td>  
    <td> <input type="checkbox" id="cb006" value=""> </td>  
    <td> <input type="checkbox" id="cb007" value=""> </td>  
    <td> <input type="checkbox" id="cb008" value=""> </td>  
    <td> <input type="checkbox" id="cb009" value=""> </td>  
    <td> <input type="checkbox" id="cb010" value=""> </td>  
    <td> <input type="checkbox" id="cb011" value=""> </td>  
    <td> <input type="checkbox" id="cb012" value=""> </td>  
    <td> <input type="checkbox" id="cb013" value=""> </td>  
    <td> <input type="checkbox" id="cb014" value=""> </td>  
    <td> <input type="checkbox" id="cb015" value=""> </td>  
    <td> <input type="checkbox" id="cb016" value=""> </td> </tr><tr id="row001"> 
    <td> <input type="checkbox" id="cb017" value=""> </td>  
    <td> <input type="checkbox" id="cb018" value=""> </td>  
    <td> <input type="checkbox" id="cb019" value=""> </td>  
    <td> <input type="checkbox" id="cb020" value=""> </td>  
    <td> <input type="checkbox" id="cb021" value=""> </td>  
    <td> <input type="checkbox" id="cb022" value=""> </td>  
    <td> <input type="checkbox" id="cb023" value=""> </td>  
    <td> <input type="checkbox" id="cb024" value=""> </td>  
    <td> <input type="checkbox" id="cb025" value=""> </td>  
    <td> <input type="checkbox" id="cb026" value=""> </td>  
    <td> <input type="checkbox" id="cb027" value=""> </td>  
    <td> <input type="checkbox" id="cb028" value=""> </td>  
    <td> <input type="checkbox" id="cb029" value=""> </td>  
    <td> <input type="checkbox" id="cb030" value=""> </td>  
    <td> <input type="checkbox" id="cb031" value=""> </td>  
    <td> <input type="checkbox" id="cb032" value=""> </td> </tr><tr id="row002"> 
    <td> <input type="checkbox" id="cb033" value=""> </td>  
    <td> <input type="checkbox" id="cb034" value=""> </td>  
    <td> <input type="checkbox" id="cb035" value=""> </td>  
    <td> <input type="checkbox" id="cb036" value=""> </td>  
    <td> <input type="checkbox" id="cb037" value=""> </td>  
    <td> <input type="checkbox" id="cb038" value=""> </td>  
    <td> <input type="checkbox" id="cb039" value=""> </td>  
    <td> <input type="checkbox" id="cb040" value=""> </td>  
    <td> <input type="checkbox" id="cb041" value=""> </td>  
    <td> <input type="checkbox" id="cb042" value=""> </td>  
    <td> <input type="checkbox" id="cb043" value=""> </td>  
    <td> <input type="checkbox" id="cb044" value=""> </td>  
    <td> <input type="checkbox" id="cb045" value=""> </td>  
    <td> <input type="checkbox" id="cb046" value=""> </td>  
    <td> <input type="checkbox" id="cb047" value=""> </td>  
    <td> <input type="checkbox" id="cb048" value=""> </td> </tr><tr id="row003"> 
    <td> <input type="checkbox" id="cb049" value=""> </td>  
    <td> <input type="checkbox" id="cb050" value=""> </td>  
    <td> <input type="checkbox" id="cb051" value=""> </td>  
    <td> <input type="checkbox" id="cb052" value=""> </td>  
    <td> <input type="checkbox" id="cb053" value=""> </td>  
    <td> <input type="checkbox" id="cb054" value=""> </td>  
    <td> <input type="checkbox" id="cb055" value=""> </td>  
    <td> <input type="checkbox" id="cb056" value=""> </td>  
    <td> <input type="checkbox" id="cb057" value=""> </td>  
    <td> <input type="checkbox" id="cb058" value=""> </td>  
    <td> <input type="checkbox" id="cb059" value=""> </td>  
    <td> <input type="checkbox" id="cb060" value=""> </td>  
    <td> <input type="checkbox" id="cb061" value=""> </td>  
    <td> <input type="checkbox" id="cb062" value=""> </td>  
    <td> <input type="checkbox" id="cb063" value=""> </td>  
    <td> <input type="checkbox" id="cb064" value=""> </td> </tr><tr id="row004"> 
    <td> <input type="checkbox" id="cb065" value=""> </td>  
    <td> <input type="checkbox" id="cb066" value=""> </td>  
    <td> <input type="checkbox" id="cb067" value=""> </td>  
    <td> <input type="checkbox" id="cb068" value=""> </td>  
    <td> <input type="checkbox" id="cb069" value=""> </td>  
    <td> <input type="checkbox" id="cb070" value=""> </td>  
    <td> <input type="checkbox" id="cb071" value=""> </td>  
    <td> <input type="checkbox" id="cb072" value=""> </td>  
    <td> <input type="checkbox" id="cb073" value=""> </td>  
    <td> <input type="checkbox" id="cb074" value=""> </td>  
    <td> <input type="checkbox" id="cb075" value=""> </td>  
    <td> <input type="checkbox" id="cb076" value=""> </td>  
    <td> <input type="checkbox" id="cb077" value=""> </td>  
    <td> <input type="checkbox" id="cb078" value=""> </td>  
    <td> <input type="checkbox" id="cb079" value=""> </td>  
    <td> <input type="checkbox" id="cb080" value=""> </td> </tr><tr id="row005"> 
    <td> <input type="checkbox" id="cb081" value=""> </td>  
    <td> <input type="checkbox" id="cb082" value=""> </td>  
    <td> <input type="checkbox" id="cb083" value=""> </td>  
    <td> <input type="checkbox" id="cb084" value=""> </td>  
    <td> <input type="checkbox" id="cb085" value=""> </td>  
    <td> <input type="checkbox" id="cb086" value=""> </td>  
    <td> <input type="checkbox" id="cb087" value=""> </td>  
    <td> <input type="checkbox" id="cb088" value=""> </td>  
    <td> <input type="checkbox" id="cb089" value=""> </td>  
    <td> <input type="checkbox" id="cb090" value=""> </td>  
    <td> <input type="checkbox" id="cb091" value=""> </td>  
    <td> <input type="checkbox" id="cb092" value=""> </td>  
    <td> <input type="checkbox" id="cb093" value=""> </td>  
    <td> <input type="checkbox" id="cb094" value=""> </td>  
    <td> <input type="checkbox" id="cb095" value=""> </td>  
    <td> <input type="checkbox" id="cb096" value=""> </td> </tr><tr id="row006"> 
    <td> <input type="checkbox" id="cb097" value=""> </td>  
    <td> <input type="checkbox" id="cb098" value=""> </td>  
    <td> <input type="checkbox" id="cb099" value=""> </td>  
    <td> <input type="checkbox" id="cb100" value=""> </td>  
    <td> <input type="checkbox" id="cb101" value=""> </td>  
    <td> <input type="checkbox" id="cb102" value=""> </td>  
    <td> <input type="checkbox" id="cb103" value=""> </td>  
    <td> <input type="checkbox" id="cb104" value=""> </td>  
    <td> <input type="checkbox" id="cb105" value=""> </td>  
    <td> <input type="checkbox" id="cb106" value=""> </td>  
    <td> <input type="checkbox" id="cb107" value=""> </td>  
    <td> <input type="checkbox" id="cb108" value=""> </td>  
    <td> <input type="checkbox" id="cb109" value=""> </td>  
    <td> <input type="checkbox" id="cb110" value=""> </td>  
    <td> <input type="checkbox" id="cb111" value=""> </td>  
    <td> <input type="checkbox" id="cb112" value=""> </td> </tr><tr id="row007"> 
    <td> <input type="checkbox" id="cb113" value=""> </td>  
    <td> <input type="checkbox" id="cb114" value=""> </td>  
    <td> <input type="checkbox" id="cb115" value=""> </td>  
    <td> <input type="checkbox" id="cb116" value=""> </td>  
    <td> <input type="checkbox" id="cb117" value=""> </td>  
    <td> <input type="checkbox" id="cb118" value=""> </td>  
    <td> <input type="checkbox" id="cb119" value=""> </td>  
    <td> <input type="checkbox" id="cb120" value=""> </td>  
    <td> <input type="checkbox" id="cb121" value=""> </td>  
    <td> <input type="checkbox" id="cb122" value=""> </td>  
    <td> <input type="checkbox" id="cb123" value=""> </td>  
    <td> <input type="checkbox" id="cb124" value=""> </td>  
    <td> <input type="checkbox" id="cb125" value=""> </td>  
    <td> <input type="checkbox" id="cb126" value=""> </td>  
    <td> <input type="checkbox" id="cb127" value=""> </td>  
    <td> <input type="checkbox" id="cb128" value=""> </td> </tr><tr id="row008"> 
    <td> <input type="checkbox" id="cb129" value=""> </td>  
    <td> <input type="checkbox" id="cb130" value=""> </td>  
    <td> <input type="checkbox" id="cb131" value=""> </td>  
    <td> <input type="checkbox" id="cb132" value=""> </td>  
    <td> <input type="checkbox" id="cb133" value=""> </td>  
    <td> <input type="checkbox" id="cb134" value=""> </td>  
    <td> <input type="checkbox" id="cb135" value=""> </td>  
    <td> <input type="checkbox" id="cb136" value=""> </td>  
    <td> <input type="checkbox" id="cb137" value=""> </td>  
    <td> <input type="checkbox" id="cb138" value=""> </td>  
    <td> <input type="checkbox" id="cb139" value=""> </td>  
    <td> <input type="checkbox" id="cb140" value=""> </td>  
    <td> <input type="checkbox" id="cb141" value=""> </td>  
    <td> <input type="checkbox" id="cb142" value=""> </td>  
    <td> <input type="checkbox" id="cb143" value=""> </td>  
    <td> <input type="checkbox" id="cb144" value=""> </td> </tr><tr id="row009"> 
    <td> <input type="checkbox" id="cb145" value=""> </td>  
    <td> <input type="checkbox" id="cb146" value=""> </td>  
    <td> <input type="checkbox" id="cb147" value=""> </td>  
    <td> <input type="checkbox" id="cb148" value=""> </td>  
    <td> <input type="checkbox" id="cb149" value=""> </td>  
    <td> <input type="checkbox" id="cb150" value=""> </td>  
    <td> <input type="checkbox" id="cb151" value=""> </td>  
    <td> <input type="checkbox" id="cb152" value=""> </td>  
    <td> <input type="checkbox" id="cb153" value=""> </td>  
    <td> <input type="checkbox" id="cb154" value=""> </td>  
    <td> <input type="checkbox" id="cb155" value=""> </td>  
    <td> <input type="checkbox" id="cb156" value=""> </td>  
    <td> <input type="checkbox" id="cb157" value=""> </td>  
    <td> <input type="checkbox" id="cb158" value=""> </td>  
    <td> <input type="checkbox" id="cb159" value=""> </td>  
    <td> <input type="checkbox" id="cb160" value=""> </td> </tr><tr id="row010"> 
    <td> <input type="checkbox" id="cb161" value=""> </td>  
    <td> <input type="checkbox" id="cb162" value=""> </td>  
    <td> <input type="checkbox" id="cb163" value=""> </td>  
    <td> <input type="checkbox" id="cb164" value=""> </td>  
    <td> <input type="checkbox" id="cb165" value=""> </td>  
    <td> <input type="checkbox" id="cb166" value=""> </td>  
    <td> <input type="checkbox" id="cb167" value=""> </td>  
    <td> <input type="checkbox" id="cb168" value=""> </td>  
    <td> <input type="checkbox" id="cb169" value=""> </td>  
    <td> <input type="checkbox" id="cb170" value=""> </td>  
    <td> <input type="checkbox" id="cb171" value=""> </td>  
    <td> <input type="checkbox" id="cb172" value=""> </td>  
    <td> <input type="checkbox" id="cb173" value=""> </td>  
    <td> <input type="checkbox" id="cb174" value=""> </td>  
    <td> <input type="checkbox" id="cb175" value=""> </td>  
    <td> <input type="checkbox" id="cb176" value=""> </td> </tr><tr id="row011"> 
    <td> <input type="checkbox" id="cb177" value=""> </td>  
    <td> <input type="checkbox" id="cb178" value=""> </td>  
    <td> <input type="checkbox" id="cb179" value=""> </td>  
    <td> <input type="checkbox" id="cb180" value=""> </td>  
    <td> <input type="checkbox" id="cb181" value=""> </td>  
    <td> <input type="checkbox" id="cb182" value=""> </td>  
    <td> <input type="checkbox" id="cb183" value=""> </td>  
    <td> <input type="checkbox" id="cb184" value=""> </td>  
    <td> <input type="checkbox" id="cb185" value=""> </td>  
    <td> <input type="checkbox" id="cb186" value=""> </td>  
    <td> <input type="checkbox" id="cb187" value=""> </td>  
    <td> <input type="checkbox" id="cb188" value=""> </td>  
    <td> <input type="checkbox" id="cb189" value=""> </td>  
    <td> <input type="checkbox" id="cb190" value=""> </td>  
    <td> <input type="checkbox" id="cb191" value=""> </td>  
    <td> <input type="checkbox" id="cb192" value=""> </td> </tr><tr id="row012"> 
    <td> <input type="checkbox" id="cb193" value=""> </td>  
    <td> <input type="checkbox" id="cb194" value=""> </td>  
    <td> <input type="checkbox" id="cb195" value=""> </td>  
    <td> <input type="checkbox" id="cb196" value=""> </td>  
    <td> <input type="checkbox" id="cb197" value=""> </td>  
    <td> <input type="checkbox" id="cb198" value=""> </td>  
    <td> <input type="checkbox" id="cb199" value=""> </td>  
    <td> <input type="checkbox" id="cb200" value=""> </td>  
    <td> <input type="checkbox" id="cb201" value=""> </td>  
    <td> <input type="checkbox" id="cb202" value=""> </td>  
    <td> <input type="checkbox" id="cb203" value=""> </td>  
    <td> <input type="checkbox" id="cb204" value=""> </td>  
    <td> <input type="checkbox" id="cb205" value=""> </td>  
    <td> <input type="checkbox" id="cb206" value=""> </td>  
    <td> <input type="checkbox" id="cb207" value=""> </td>  
    <td> <input type="checkbox" id="cb208" value=""> </td> </tr><tr id="row013"> 
    <td> <input type="checkbox" id="cb209" value=""> </td>  
    <td> <input type="checkbox" id="cb210" value=""> </td>  
    <td> <input type="checkbox" id="cb211" value=""> </td>  
    <td> <input type="checkbox" id="cb212" value=""> </td>  
    <td> <input type="checkbox" id="cb213" value=""> </td>  
    <td> <input type="checkbox" id="cb214" value=""> </td>  
    <td> <input type="checkbox" id="cb215" value=""> </td>  
    <td> <input type="checkbox" id="cb216" value=""> </td>  
    <td> <input type="checkbox" id="cb217" value=""> </td>  
    <td> <input type="checkbox" id="cb218" value=""> </td>  
    <td> <input type="checkbox" id="cb219" value=""> </td>  
    <td> <input type="checkbox" id="cb220" value=""> </td>  
    <td> <input type="checkbox" id="cb221" value=""> </td>  
    <td> <input type="checkbox" id="cb222" value=""> </td>  
    <td> <input type="checkbox" id="cb223" value=""> </td>  
    <td> <input type="checkbox" id="cb224" value=""> </td> </tr><tr id="row014"> 
    <td> <input type="checkbox" id="cb225" value=""> </td>  
    <td> <input type="checkbox" id="cb226" value=""> </td>  
    <td> <input type="checkbox" id="cb227" value=""> </td>  
    <td> <input type="checkbox" id="cb228" value=""> </td>  
    <td> <input type="checkbox" id="cb229" value=""> </td>  
    <td> <input type="checkbox" id="cb230" value=""> </td>  
    <td> <input type="checkbox" id="cb231" value=""> </td>  
    <td> <input type="checkbox" id="cb232" value=""> </td>  
    <td> <input type="checkbox" id="cb233" value=""> </td>  
    <td> <input type="checkbox" id="cb234" value=""> </td>  
    <td> <input type="checkbox" id="cb235" value=""> </td>  
    <td> <input type="checkbox" id="cb236" value=""> </td>  
    <td> <input type="checkbox" id="cb237" value=""> </td>  
    <td> <input type="checkbox" id="cb238" value=""> </td>  
    <td> <input type="checkbox" id="cb239" value=""> </td>  
    <td> <input type="checkbox" id="cb240" value=""> </td> </tr><tr id="row015"> 
    <td> <input type="checkbox" id="cb241" value=""> </td>  
    <td> <input type="checkbox" id="cb242" value=""> </td>  
    <td> <input type="checkbox" id="cb243" value=""> </td>  
    <td> <input type="checkbox" id="cb244" value=""> </td>  
    <td> <input type="checkbox" id="cb245" value=""> </td>  
    <td> <input type="checkbox" id="cb246" value=""> </td>  
    <td> <input type="checkbox" id="cb247" value=""> </td>  
    <td> <input type="checkbox" id="cb248" value=""> </td>  
    <td> <input type="checkbox" id="cb249" value=""> </td>  
    <td> <input type="checkbox" id="cb250" value=""> </td>  
    <td> <input type="checkbox" id="cb251" value=""> </td>  
    <td> <input type="checkbox" id="cb252" value=""> </td>  
    <td> <input type="checkbox" id="cb253" value=""> </td>  
    <td> <input type="checkbox" id="cb254" value=""> </td>  
    <td> <input type="checkbox" id="cb255" value=""> </td>  
    <td> <input type="checkbox" id="cb256" value=""> </td> </tr>

</tbody>
</table>




<button onclick="submitRhythm()">Submit rhythm</button>
</div>
</body>
<script>
function submitRhythm(){
    var rhythm = [];
    var table = document.getElementById('main_table');
    for (var i = 0, row; row = table.rows[i+1]; i++) 
    {
        rhythm.push({'track': []})
        for (var j = 0, col; col = row.cells[j]; j++) 
        {
            // cb = checkbox
            var cb = col.childNodes[1]
            if (cb.checked)
            {
                // could just use var j?
                var note_time = j / 16.0;
                rhythm[i].track.push({'note': note_time});
                console.log(cb);
            }
        }
        // check if track empty delete track else add sound  
    }
    // json2xml(eval(json))
    console.log(JSON.stringify(rhythm))
    return rhythm;
}

function delEmptyTracks(rhythm){
    for (var i = 0; i < rhythm.length; i++)
    {
        if (rhythm[i].track.length == 0)
        {
            console.log(i);
            rhythm.pop(i)
        }
    }
}

rhythm = [
    [
        {'track':[
            {'note': 0.2},
            {'note': 0.4}]},
        {'sound':'djembe_low.wav'}
    ],
    {'track':[{'note': 0.2}, {'note': 0.4}]}
]
</script>
</html>
